# pthread_join函数

线程和进程一样，子线程退出的时候其内核资源主要由主线程回收，线程库中提供的线程回收函叫做 pthread_join()，这个函数是一个阻塞函数，如果还有子线程在运行，调用该函数就会阻塞，子线程退出函数解除阻塞进行资源的回收，函数被调用一次，只能回收一个子线程，如果有多个子线程则需要循环进行回收。

## 头文件

```c
#include <pthread.h>
```



## 函数声明

另外通过线程回收函数还可以获取到子线程退出时传递出来的数据，函数原型如下：

```c
int pthread_join(pthread_t thread, void **retval);
```

这是一个阻塞函数, 子线程在运行这个函数就阻塞
子线程退出, 函数解除阻塞, 回收对应的子线程资源, 类似于回收进程使用的函数 wait()


## 返回值

返回值：线程回收成功返回 0，回收失败返回错误号。

## 参数

- thread: 要被回收的子线程的线程 ID
- retval: 二级指针，指向一级指针的地址，是一个传出参数，这个地址中存储了 pthread_exit () 传递出的数据，如果不需要这个参数，可以指定为 NULL



https://subingwen.cn/linux/thread/

